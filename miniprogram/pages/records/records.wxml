<view class="container">
  <!-- È°µÈù¢Â§¥ÈÉ® -->
  <view class="page-header">
    <text class="page-title">ËÆ∞ÂΩï</text>
    <view class="record-count" wx:if="{{records.length > 0}}">{{records.length}} Êù°</view>
  </view>

  <!-- Êó∂Èó¥ËΩ¥ÂàóË°® -->
  <scroll-view 
    class="timeline" 
    scroll-y 
    enhanced 
    show-scrollbar="{{false}}"
  >
    <!-- ÂàÜÁªÑÁöÑÊó∂Èó¥ËΩ¥ -->
    <view class="timeline-list" wx:if="{{records.length > 0}}">
      <block wx:for="{{groupKeys}}" wx:key="index">
        <!-- Êó•ÊúüÂàÜÁªÑÊ†áÈ¢ò -->
        <view class="date-group-title">
          <text>{{item}}</text>
        </view>
        
        <!-- ËØ•Êó•Êúü‰∏ãÁöÑÊâÄÊúâËÆ∞ÂΩï -->
        <view 
          wx:for="{{groupedRecords[item]}}"
          wx:for-item="record"
          wx:key="id"
          class="timeline-item"
          style="--delay: {{index * 0.05}}s;"
        >
          <!-- Â∑¶‰æßÊó∂Èó¥ÁÇπ -->
          <view class="timeline-left">
            <view class="time-dot" style="background: {{record.mealInfo.color}};">
              <view class="dot-inner" style="background: {{record.mealInfo.color}};"></view>
            </view>
            <view class="time-line" style="background: {{record.mealInfo.color}}20;"></view>
          </view>
          
          <!-- Âè≥‰æßÂÜÖÂÆπ -->
          <view 
            class="timeline-content"
            data-id="{{record.id}}"
            bindtap="onRecordTap"
          >
            <view class="content-header">
              <text class="meal-label" style="color: {{record.mealInfo.color}};">{{record.mealInfo.emoji}} {{record.mealInfo.label}}</text>
              <text class="record-time">{{record.formattedTime}}</text>
            </view>
            
            <!-- Â§öÂõæ‰πùÂÆ´Ê†º -->
            <view class="image-grid">
              <view 
                wx:for="{{record.imageUrl}}" 
                wx:for-item="img" 
                wx:for-index="imgIndex"
                wx:key="imgIndex"
                class="grid-image-item"
              >
                <image class="grid-img" src="{{img}}" mode="aspectFill"></image>
              </view>
            </view>
            
            <view class="content-footer">
              <text class="record-title">{{record.title}}</text>
            </view>
          </view>
        </view>
      </block>
    </view>

    <!-- Á©∫Áä∂ÊÄÅ -->
    <view class="empty-state" wx:else>
      <view class="empty-emoji">üçΩÔ∏è</view>
      <text class="empty-text">ËøòÊ≤°ÊúâËÆ∞ÂΩïÂì¶</text>
      <text class="empty-hint">ËÆ∞ÂΩï‰Ω†ÁöÑÁ¨¨‰∏ÄÈ°øÈ•≠Âêß</text>
    </view>
  </scroll-view>
</view>
