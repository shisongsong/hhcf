<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <text class="page-title">è®°å½•</text>
    <view class="record-count" wx:if="{{records.length > 0}}">{{records.length}} æ¡</view>
  </view>

  <!-- æ—¶é—´è½´åˆ—è¡¨ -->
  <scroll-view 
    class="timeline" 
    scroll-y 
    enhanced 
    show-scrollbar="{{false}}"
  >
    <view class="timeline-list" wx:if="{{records.length > 0}}">
      <view 
        wx:for="{{records}}"
        wx:key="id"
        class="timeline-item"
        data-id="{{item.id}}"
        bindtap="onRecordTap"
      >
        <!-- å·¦ä¾§æ—¶é—´ç‚¹ -->
        <view class="timeline-left">
          <view class="time-dot" style="background: {{item.mealInfo.color}};">
            <view class="dot-inner" style="background: {{item.mealInfo.color}};"></view>
          </view>
          <view class="time-line" style="background: {{item.mealInfo.color}}20;"></view>
        </view>
        
        <!-- å³ä¾§å†…å®¹ -->
        <view class="timeline-content">
          <view class="content-header">
            <text class="meal-label" style="color: {{item.mealInfo.color}};">{{item.mealInfo.emoji}} {{item.mealInfo.label}}</text>
            <text class="record-time">{{item.formattedTime}}</text>
          </view>
          
          <!-- å¤šå›¾ä¹å®«æ ¼ -->
          <view class="image-grid" style="grid-template-columns: repeat({{item.imageUrl.length > 3 ? 3 : item.imageUrl.length}}, 1fr);">
            <view 
              wx:for="{{item.imageUrl}}" 
              wx:for-item="img" 
              wx:for-index="imgIndex"
              wx:key="imgIndex"
              class="grid-image-item"
            >
              <image class="grid-img" src="{{img}}" mode="aspectFill"></image>
            </view>
          </view>
          
          <view class="content-footer">
            <text class="record-title">{{item.title}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:else>
      <view class="empty-emoji">ğŸ½ï¸</view>
      <text class="empty-text">è¿˜æ²¡æœ‰è®°å½•å“¦</text>
      <text class="empty-hint">è®°å½•ä½ çš„ç¬¬ä¸€é¡¿é¥­å§</text>
    </view>
  </scroll-view>
</view>
